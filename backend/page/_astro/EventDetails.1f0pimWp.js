import{j as e}from"./jsx-runtime.B6N9iRLn.js";import{r as t}from"./index.DNi1g-pO.js";import{T as N}from"./Timer.mJWiP89O.js";import{B as m,a as y}from"./Button.BI9RPgp0.js";import{g as b}from"./index.DS6nHFjH.js";import{a as l}from"./api.vvbwN_wq.js";import{Checkbox as w}from"./checkbox.CClmJxyn.js";import{T as _}from"./Tasks.DWhn8Zhw.js";import E from"./SponsorsInEvent.kLTJULwn.js";import{f}from"./format.BcQETFuH.js";import"./constants.DsI_Q9q-.js";import"./check.D66-KWCr.js";import"./index.DDEQXXIH.js";import"./index.MkY1K082.js";import"./index.DiuBTR2a.js";import"./utils.tCEEUih2.js";function T({eventId:a}){const[r,c]=t.useState([]);return t.useEffect(()=>{a&&l.events.getFQAs(a).then(c)},[a]),r.length===0?null:e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"text-3xl font-semibold text-center",children:"Preguntas frecuentes"}),e.jsx("div",{className:"py-16 flex flex-col gap-10",children:r.map((o,d)=>e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("h1",{className:"text-xl font-semibold",children:o.question}),e.jsx("p",{className:"text-p-secondary-text text-base",children:o.answer})]},d))})]})}function z(){const[a,r]=t.useState(null),[c,o]=t.useState(0),[d,p]=t.useState(0),[s,u]=t.useState(null),[n,j]=t.useState({id:0,title:"HackMx ...",description:"...",quota_per_team:4,start_date:"2022-01-01T00:00:00Z",end_date:"2022-01-01T00:00:00Z",location:"Campus Estado de México",map_url:""}),[x,g]=t.useState(!1);t.useEffect(()=>{const i=b("id");i&&u(parseInt(i))},[]),t.useEffect(()=>{(s||s===0)&&(l.events.get(s).then(i=>{i||(window.location.href="/dashboard"),j(i),document.getElementById("loading")?.classList.add("hidden"),l.events.getParticipantsCount(s).then(o),l.events.getQuota(s).then(p)}).catch(()=>{window.location.href="/dashboard"}),l.events.getRegistrationDetails(s).then(i=>{i||(window.location.href="/dashboard"),r(i)}).catch(()=>{window.location.href="/dashboard"}))},[s]);function v(){l.events.registerToEvent(s??0,x).then(()=>{a&&r({...a,user_in_event:!0}),h()})}function h(){window.location.href=`/teams?id=${s}`}return e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsxs("div",{className:"md:w-[40rem] bg-p-secondary-background p-10 pt-16 rounded-sm flex flex-col gap-5 relative",children:[e.jsx("div",{className:"absolute top-0 left-0 p-2 bg-[#4a4d82] rounded-br-md px-3",children:e.jsx("p",{className:"text-sm",children:"Tecnológico de Monterrey"})}),e.jsx("div",{children:e.jsx("p",{className:"text-p-secondary-text",children:n.location})}),e.jsx("h1",{className:"text-4xl font-bold",children:n.title}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("p",{className:"text-p-secondary-text text-sm",children:[e.jsx("span",{className:"font-bold",children:"Inicio:"})," ",f(new Date(n.start_date),"dd - MM - yyyy HH:mm")]}),e.jsxs("p",{className:"text-p-secondary-text text-sm",children:[e.jsx("span",{className:"font-bold",children:"Fin:"})," ",f(new Date(n.end_date),"dd - MM - yyyy HH:mm")]}),e.jsxs("p",{className:"text-p-secondary-text text-sm",children:[e.jsx("span",{className:"font-bold",children:"Participantes:"})," ",c," /"," ",d]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("div",{className:"w-56 flex justify-end",children:a===null?e.jsx(m,{children:"..."}):a.user_in_event?e.jsx("div",{className:"w-40 flex justify-end",children:e.jsx(m,{onClick:h,children:"Ver equipos"})}):a.quota_available?e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("p",{className:"text-p-secondary-text text-sm flex items-center justify-center gap-2",children:[e.jsx("span",{className:"font-bold",children:"¿Requieres autobús? "})," ",e.jsx(w,{checked:x,onClick:()=>g(!x)})]}),e.jsx(m,{onClick:v,children:"Inscribirme"})]}):e.jsx("div",{children:e.jsx(y,{children:"Evento no Disponible"})})})})]})}),e.jsxs("div",{className:"grid lg:grid-cols-2 lg:gap-10 gap-16",children:[e.jsxs("div",{className:"flex flex-col gap-10",children:[e.jsx("h1",{className:"text-3xl font-semibold",children:"Resumen"}),e.jsx("p",{className:"text-p-secondary-text",children:n.description})]}),e.jsx("div",{className:"flex flex-col gap-16",children:e.jsxs("div",{className:"flex flex-col gap-10",children:[e.jsx("h1",{className:"text-3xl text-center font-semibold",children:"Tiempo Restante"}),e.jsx("div",{children:e.jsx(N,{duration:Math.floor((new Date(n.start_date).getTime()-new Date().getTime())/1e3),pause:!1})})]})})]}),e.jsx(E,{}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-16",children:[e.jsx("div",{children:e.jsx(T,{eventId:s})}),e.jsx("div",{children:e.jsx(_,{eventId:s})})]}),e.jsx("div",{className:"h-96 w-full",children:n.map_url&&e.jsx("iframe",{src:n.map_url,width:"100%",height:"100%",style:{border:"0",filter:"contrast(0.9) invert(1) sepia(0.5) saturate(1.2) hue-rotate(180deg)"},allowFullScreen:!1,loading:"lazy",referrerPolicy:"no-referrer-when-downgrade"})})]})}export{z as default};
