import{j as e}from"./jsx-runtime.B6N9iRLn.js";import{r as a}from"./index.DNi1g-pO.js";import{B as N,a as E}from"./Button.BI9RPgp0.js";import{g as D}from"./index.DS6nHFjH.js";import{a as c,S as M}from"./api.DSv2L0Mn.js";import{Checkbox as _}from"./checkbox.CClmJxyn.js";import{T as k}from"./Tasks.plQL3p3D.js";import{f as w}from"./format.BcQETFuH.js";import"./check.D66-KWCr.js";import"./index.DDEQXXIH.js";import"./index.MkY1K082.js";import"./index.DiuBTR2a.js";import"./utils.tCEEUih2.js";function j({value:t,description:n}){return e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"p-6 bg-p-secondary-background rounded-md max-[420px]:p-4",children:t}),e.jsx("div",{className:"absolute rounded-full w-3 h-3 bg-p-background !-left-[6px] top-1/2 -mt-1"}),e.jsx("div",{className:"absolute rounded-full w-3 h-3 bg-p-background !-right-[6px] top-1/2 -mt-1"})]}),e.jsx("div",{className:"text-xs text-center capitalize text-secondary",children:n})]})}function I({duration:t,pause:n}){const[o,d]=a.useState(Date.now()),[r,x]=a.useState(t);a.useEffect(()=>{d(Date.now()),x(t)},[t]),a.useEffect(()=>{if(n)return;const i=setInterval(()=>{const g=Date.now(),p=Math.floor((g-o)/1e3),u=t-p;u<=0?(clearInterval(i),x(0)):x(u)},1e3);return()=>clearInterval(i)},[o,t,n]);const m=Math.floor(r/86400),f=Math.floor(r%86400/3600),s=Math.floor(r%3600/60),h=r%60;return e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"flex gap-5 text-xl max-[420px]:gap-3",children:[e.jsx(j,{value:m.toString().padStart(2,"0"),description:"Día"+(m!==1?"s":"")}),e.jsx(j,{value:f.toString().padStart(2,"0"),description:"Hora"+(f!==1?"s":"")}),e.jsx(j,{value:s.toString().padStart(2,"0"),description:"Minuto"+(s!==1?"s":"")}),e.jsx(j,{value:h.toString().padStart(2,"0"),description:"Segundo"+(h!==1?"s":"")})]})})}function R({eventId:t}){const[n,o]=a.useState([]);return a.useEffect(()=>{t&&c.events.getFQAs(t).then(o)},[t]),n.length===0?null:e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"text-3xl font-semibold text-center",children:"Preguntas frecuentes"}),e.jsx("div",{className:"py-16 flex flex-col gap-10",children:n.map((d,r)=>e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("h1",{className:"text-xl font-semibold",children:d.question}),e.jsx("p",{className:"text-p-secondary-text text-base",children:d.answer})]},r))})]})}function W(){const[t,n]=a.useState(null),[o,d]=a.useState(0),[r,x]=a.useState(0),[m,f]=a.useState([]),[s,h]=a.useState(null),[i,g]=a.useState({id:0,title:"HackMx ...",description:"...",quota_per_team:4,start_date:"2022-01-01T00:00:00Z",end_date:"2022-01-01T00:00:00Z",location:"Campus Estado de México"}),[p,u]=a.useState(!1);a.useEffect(()=>{const l=D("id");l&&h(parseInt(l))},[]),a.useEffect(()=>{(s||s===0)&&(c.events.get(s).then(l=>{l||(window.location.href="/dashboard"),g(l),document.getElementById("loading")?.classList.add("hidden"),c.events.getSponsors(s).then(v=>{f(v)}),c.events.getParticipantsCount(s).then(d),c.events.getQuota(s).then(x)}).catch(()=>{window.location.href="/dashboard"}),c.events.getRegistrationDetails(s).then(l=>{l||(window.location.href="/dashboard"),n(l)}).catch(()=>{window.location.href="/dashboard"}))},[s]);function y(){c.events.registerToEvent(s??0,p).then(()=>{t&&n({...t,user_in_event:!0}),b()})}function b(){window.location.href=`/teams?id=${s}`}return e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsxs("div",{className:"md:w-[40rem] bg-p-secondary-background p-10 pt-16 rounded-sm flex flex-col gap-5 relative",children:[e.jsx("div",{className:"absolute top-0 left-0 p-2 bg-[#4a4d82] rounded-br-md px-3",children:e.jsx("p",{className:"text-sm",children:"Tecnológico de Monterrey"})}),e.jsx("div",{children:e.jsx("p",{className:"text-p-secondary-text",children:i.location})}),e.jsx("h1",{className:"text-4xl font-bold",children:i.title}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("p",{className:"text-p-secondary-text text-sm",children:[e.jsx("span",{className:"font-bold",children:"Inicio:"})," ",w(new Date(i.start_date),"dd - MM - yyyy HH:mm")]}),e.jsxs("p",{className:"text-p-secondary-text text-sm",children:[e.jsx("span",{className:"font-bold",children:"Fin:"})," ",w(new Date(i.end_date),"dd - MM - yyyy HH:mm")]}),e.jsxs("p",{className:"text-p-secondary-text text-sm",children:[e.jsx("span",{className:"font-bold",children:"Participantes:"})," ",o," / ",r]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("div",{className:"w-56 flex justify-end",children:t===null?e.jsx(N,{children:"..."}):t.user_in_event?e.jsx("div",{className:"w-40 flex justify-end",children:e.jsx(N,{onClick:b,children:"Ver equipos"})}):t.quota_available?e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("p",{className:"text-p-secondary-text text-sm flex items-center justify-center gap-2",children:[e.jsx("span",{className:"font-bold",children:"¿Requieres autobús? "})," ",e.jsx(_,{checked:p,onClick:()=>u(!p)})]}),e.jsx(N,{onClick:y,children:"Inscribirme"})]}):e.jsx("div",{children:e.jsx(E,{children:"Evento no Disponible"})})})})]})}),e.jsxs("div",{className:"grid lg:grid-cols-2 lg:gap-10 gap-16",children:[e.jsxs("div",{className:"flex flex-col gap-10",children:[e.jsx("h1",{className:"text-3xl font-semibold",children:"Resumen"}),e.jsx("p",{className:"text-p-secondary-text",children:i.description})]}),e.jsx("div",{className:"flex flex-col gap-16",children:e.jsxs("div",{className:"flex flex-col gap-10",children:[e.jsx("h1",{className:"text-3xl text-center font-semibold",children:"Tiempo Restante"}),e.jsx("div",{children:e.jsx(I,{duration:Math.floor((new Date(i.start_date).getTime()-new Date().getTime())/1e3),pause:!1})})]})})]}),m.length>0&&e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-semibold text-center",children:"Patrocinadores"}),e.jsx("div",{className:"flex flex-wrap gap-10 pt-10 justify-center",children:m.map(([l,v,S],T)=>e.jsx("img",{src:`${M}/${S}`,alt:v,className:"w-40 h-36 object-scale-down rounded-md"},T))})]}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-16",children:[e.jsx("div",{children:e.jsx(R,{eventId:s})}),e.jsx("div",{children:e.jsx(k,{eventId:s})})]})]})}export{W as default};
